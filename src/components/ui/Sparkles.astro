---
interface Props {
  count?: number;
  colors?: string[];
}

const { count = 50, colors = ['#ff0080', '#00ffff', '#ffff00', '#ff00ff', '#00ff00', '#ff8c00'] } = Astro.props;

// Generate random sparkle positions
const sparkles = Array.from({ length: count }, (_, i) => ({
  id: i,
  left: Math.random() * 100,
  top: Math.random() * 100,
  size: Math.random() * 12 + 4,
  delay: Math.random() * 5,
  duration: Math.random() * 2 + 1,
  color: colors[Math.floor(Math.random() * colors.length)],
}));
---

<div class="sparkles-container absolute inset-0 overflow-hidden pointer-events-none z-[5]">
  {sparkles.map((sparkle) => (
    <div
      class="sparkle absolute"
      style={`
        left: ${sparkle.left}%;
        top: ${sparkle.top}%;
        width: ${sparkle.size}px;
        height: ${sparkle.size}px;
        animation-delay: ${sparkle.delay}s;
        animation-duration: ${sparkle.duration}s;
        --sparkle-color: ${sparkle.color};
      `}
    >
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M12 0L14.5 9.5L24 12L14.5 14.5L12 24L9.5 14.5L0 12L9.5 9.5L12 0Z"
          fill={sparkle.color}
        />
      </svg>
    </div>
  ))}
</div>

<style>
  @keyframes sparkle-spin {
    0% {
      transform: rotate(0deg) scale(0);
      opacity: 0;
    }
    25% {
      transform: rotate(90deg) scale(1);
      opacity: 1;
    }
    50% {
      transform: rotate(180deg) scale(0.5);
      opacity: 0.8;
    }
    75% {
      transform: rotate(270deg) scale(1.2);
      opacity: 1;
    }
    100% {
      transform: rotate(360deg) scale(0);
      opacity: 0;
    }
  }

  .sparkle {
    animation: sparkle-spin 2s ease-in-out infinite;
    filter: drop-shadow(0 0 4px var(--sparkle-color)) drop-shadow(0 0 8px var(--sparkle-color));
  }

  .sparkle svg {
    width: 100%;
    height: 100%;
  }
</style>
